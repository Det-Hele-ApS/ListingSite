@model ListingPageModel
@inject IViewLocalizer Localizer

@{
	Layout = "_ContentLayout";
	ViewData["Title"] = Localizer["Escorts"];
}

<script type="text/javascript">
	function adjustImage(id) {
		var el = document.getElementById(id);
		if (el.offsetHeight > 400) {
			el.style.height = '400px';
		} else if (el.offsetHeight < 400) {
			var mt = (399 - el.offsetHeight) / 2;
			el.style.marginTop = mt + 'px';
		}
	}

	var currentPage = @Model.CurrentPage;
	var totalPages = @Model.TotalPages;

	if (currentPage > 1) {
		var relPrev = document.createElement('link');
		relPrev.href = location.origin +
			(location.pathname !== '/' ? location.pathname : '/eskorte') + '?page=' + (currentPage - 1);
		relPrev.rel = 'prev';

		document.head.appendChild(relPrev);
	}

	if (currentPage < totalPages) {
		var relNext = document.createElement('link');
		relNext.href = location.origin +
			(location.pathname !== '/' ? location.pathname : '/eskorte') + '?page=' + (currentPage + 1);
		relNext.rel = 'next';

		document.head.appendChild(relNext);
	}

</script>

<!-- Sub banner start -->
<div class="sub-banner overview-bgi">
	<div class="container">
		<div class="breadcrumb-area">
			<h1>
				@Localizer["Find what you really want"]
			</h1>
			<ul class="breadcrumbs">
				@if (string.IsNullOrEmpty(ViewContext.RouteData.Values["first"]?.ToString()))
				{
					<li class="active">@Localizer["Escorts"]</li>
				}
				else
				{
					<li><a href="/eskorte">@Localizer["Escorts"]</a></li>
					@if (string.IsNullOrEmpty(ViewContext.RouteData.Values["second"]?.ToString()))
					{
						<li class="active">@ViewContext.RouteData.Values["first"]</li>
					}
					else
					{
						<li><a href="/eskorte/@ViewContext.RouteData.Values["first"]">@ViewContext.RouteData.Values["first"]</a></li>
						@if (string.IsNullOrEmpty(ViewContext.RouteData.Values["third"]?.ToString()))
						{
							<li class="active">@ViewContext.RouteData.Values["second"]</li>
						}
						else
						{
							<li><a href="/eskorte/@ViewContext.RouteData.Values["first"]/@ViewContext.RouteData.Values["second"]">@ViewContext.RouteData.Values["second"]</a></li>
							<li class="active">@ViewContext.RouteData.Values["third"]</li>
						}
					}
				}
			</ul>
		</div>
	</div>
</div>
<!-- Sub banner end -->

<div class="properties-list-rightside content-area-2">
	<div class="container">
		<div class="row">
			<div class="col-lg-4 col-md-12">
				@await Html.PartialAsync("_Sidebar")
			</div>

			<div class="col-lg-8 col-md-12">
				<div class="option-bar d-none d-xl-block d-lg-block d-md-block d-sm-block">
					<div class="row clearfix">
						<div class="col-12">
							<h4>
								<span class="heading-icon">
									<i class="fa fa-caret-right icon-design"></i>
									<i class="fa fa-th-large"></i>
								</span>
								<span class="heading">@Localizer["Escorts"]</span>
							</h4>
						</div>
					</div>
				</div>

				<div class="subtitle">
					Page @Model.CurrentPage of @Model.TotalPages
				</div>
				<div class="row">
					@foreach (var escort in Model.Escorts)
					{
						<div class="col-lg-6 col-md-6 col-sm-12">
							<div class="property-box">
								<div class="property-thumbnail">
									<a asp-controller="Profile" asp-action="Index" asp-route-id="@(escort.Slug ?? escort.ExternalId.ToString())" class="property-img">
										@*<div class="tag button alt featured">Featured</div>
											<div class="price-ratings-box">
												<p class="price">
													$xxx
												</p>
												<div class="ratings">
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star"></i>
													<i class="fa fa-star-o"></i>
												</div>
											</div>*@
										/**/
										<img id="@(escort.Slug ?? escort.ExternalId.ToString())"
											 src="@escort.MainImage.SmallPath"
											 alt="@escort.Name"
											 class="img-fluid listing-image"
											 onload="adjustImage('@(escort.Slug ?? escort.ExternalId.ToString())');">
									</a>
									<div class="property-overlay">
										<a asp-controller="Profile"
										   asp-action="Index"
										   asp-route-id="@(escort.Slug ?? escort.ExternalId.ToString())" class="overlay-link">
											<i class="fa fa-link"></i>
										</a>
										<div class="property-magnify-gallery">
											<a href="@escort.MainImage.Path" class="overlay-link">
												<i class="fa fa-expand"></i>
											</a>
											<a href="@escort.MainImage.Path" class="hidden"></a>
											<a href="@escort.MainImage.Path" class="hidden"></a>
										</div>
									</div>
								</div>
								<div class="detail">
									<h1 class="title">
										<a asp-controller="Profile"
										   asp-action="Index"
										   asp-route-id="@(escort.Slug ?? escort.ExternalId.ToString())">@escort.Name</a>
									</h1>
									/**/
									@*<div class="location">
											<a asp-controller="Profile" asp-action="Index" asp-route-id="@(escort.Slug ?? escort.ExternalId.ToString())">
												<i class="fa fa-map-marker"></i>@escort.EscortType
											</a>
										</div>*@
									/**/
								</div>
							</div>
						</div>
					}

					@await Html.PartialAsync("_Pager", new ViewDataDictionary(this.ViewData))
				</div>
			</div>
		</div>
	</div>
</div>